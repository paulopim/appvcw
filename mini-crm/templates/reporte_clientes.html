{% extends "base.html" %}

{% block title %}Reporte: Ventas por Cliente{% endblock %}

{% block content %}
<div class="card">
    <h2>üìä Ventas por Cliente</h2>
    <a href="{{ url_for('reportes') }}" class="btn btn-secondary">‚Üê Volver a Reportes</a>
</div>

{% if reporte %}
<table>
    <thead>
        <tr>
            <th>Ranking</th>
            <th>Cliente</th>
            <th>Tel√©fono</th>
            <th>Email</th>
            <th>Total Ventas</th>
            <th>Total Pagado</th>
            <th>Puntos Fidelidad</th>
        </tr>
    </thead>
    <tbody>
        {% for row in reporte %}
        <tr>
            <td>
                {% if loop.index == 1 %}ü•á
                {% elif loop.index == 2 %}ü•à
                {% elif loop.index == 3 %}ü•â
                {% else %}{{ loop.index }}
                {% endif %}
            </td>
            <td>{{ row.nombre }}</td>
            <td>{{ row.telefono or '-' }}</td>
            <td>{{ row.email or '-' }}</td>
            <td>{{ row.total_ventas or 0 }}</td>
            <td><strong>{{ "%.2f"|format(row.total_pagado or 0) }} ‚Ç¨</strong></td>
            <td>{{ "%.1f"|format(row.puntos_fidelidad or 0) }} pts</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<div class="card">
    <p>No hay datos disponibles.</p>
</div>
{% endif %}
{% endblock %}
