{% extends "base.html" %}

{% block title %}Reporte: Top Clientes Fidelidad{% endblock %}

{% block content %}
<div class="card">
    <h2>üìä Top 50 Clientes por Puntos de Fidelidad</h2>
    <a href="{{ url_for('reportes') }}" class="btn btn-secondary">‚Üê Volver a Reportes</a>
</div>

{% if reporte %}
<table>
    <thead>
        <tr>
            <th>Posici√≥n</th>
            <th>Cliente</th>
            <th>Tel√©fono</th>
            <th>Email</th>
            <th>Puntos</th>
            <th>Total Compras</th>
            <th>Total Gastado</th>
        </tr>
    </thead>
    <tbody>
        {% for row in reporte %}
        <tr>
            <td>
                {% if loop.index == 1 %}ü•á
                {% elif loop.index == 2 %}ü•à
                {% elif loop.index == 3 %}ü•â
                {% else %}{{ loop.index }}
                {% endif %}
            </td>
            <td>{{ row.nombre }}</td>
            <td>{{ row.telefono or '-' }}</td>
            <td>{{ row.email or '-' }}</td>
            <td><strong>{{ "%.1f"|format(row.puntuacion) }}</strong> pts</td>
            <td>{{ row.total_compras or 0 }}</td>
            <td>{{ "%.2f"|format(row.total_gastado or 0) }} ‚Ç¨</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<div class="card">
    <p>No hay datos disponibles.</p>
</div>
{% endif %}
{% endblock %}
